!function(){L.Control.FullScreen=L.Control.extend({options:{position:"topleft",title:"Full Screen",titleCancel:"Exit Full Screen",forceSeparateButton:!1,forcePseudoFullscreen:!1,fullscreenElement:!1},onAdd:function(a){var c,b="leaflet-control-zoom-fullscreen",d="";return c=a.zoomControl&&!this.options.forceSeparateButton?a.zoomControl._container:L.DomUtil.create("div","leaflet-bar"),this.options.content?d=this.options.content:b+=" fullscreen-icon",this._createButton(this.options.title,b,d,c,this.toggleFullScreen,this),this._map.on("enterFullscreen exitFullscreen",this._toggleTitle,this),c},_createButton:function(b,c,d,e,f,g){return this.link=L.DomUtil.create("a",c,e),this.link.href="#",this.link.title=b,this.link.innerHTML=d,L.DomEvent.addListener(this.link,"click",L.DomEvent.stopPropagation).addListener(this.link,"click",L.DomEvent.preventDefault).addListener(this.link,"click",f,g),L.DomEvent.addListener(e,a.fullScreenEventName,L.DomEvent.stopPropagation).addListener(e,a.fullScreenEventName,L.DomEvent.preventDefault).addListener(e,a.fullScreenEventName,this._handleEscKey,g),L.DomEvent.addListener(document,a.fullScreenEventName,L.DomEvent.stopPropagation).addListener(document,a.fullScreenEventName,L.DomEvent.preventDefault).addListener(document,a.fullScreenEventName,this._handleEscKey,g),this.link},toggleFullScreen:function(){var b=this._map;b._exitFired=!1,b._isFullscreen?(a.supportsFullScreen&&!this.options.forcePseudoFullscreen?a.cancelFullScreen(this.options.fullscreenElement?this.options.fullscreenElement:b._container):L.DomUtil.removeClass(b._container,"leaflet-pseudo-fullscreen"),b.invalidateSize(),b.fire("exitFullscreen"),b._exitFired=!0,b._isFullscreen=!1):(a.supportsFullScreen&&!this.options.forcePseudoFullscreen?a.requestFullScreen(this.options.fullscreenElement?this.options.fullscreenElement:b._container):L.DomUtil.addClass(b._container,"leaflet-pseudo-fullscreen"),b.invalidateSize(),b.fire("enterFullscreen"),b._isFullscreen=!0)},_toggleTitle:function(){this.link.title=this._map._isFullscreen?this.options.title:this.options.titleCancel},_handleEscKey:function(){var b=this._map;a.isFullScreen(b)||b._exitFired||(b.fire("exitFullscreen"),b._exitFired=!0,b._isFullscreen=!1)}}),L.Map.addInitHook(function(){this.options.fullscreenControl&&(this.fullscreenControl=L.control.fullscreen(this.options.fullscreenControlOptions),this.addControl(this.fullscreenControl))}),L.control.fullscreen=function(a){return new L.Control.FullScreen(a)};var a={supportsFullScreen:!1,isFullScreen:function(){return!1},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""},b="webkit moz o ms khtml".split(" ");if(void 0!==document.exitFullscreen)a.supportsFullScreen=!0;else{for(var c=0,d=b.length;c<d;c++)if(a.prefix=b[c],void 0!==document[a.prefix+"CancelFullScreen"]){a.supportsFullScreen=!0;break}void 0!==document.msExitFullscreen&&(a.prefix="ms",a.supportsFullScreen=!0)}a.supportsFullScreen&&("ms"===a.prefix?a.fullScreenEventName="MSFullscreenChange":a.fullScreenEventName=a.prefix+"fullscreenchange",a.isFullScreen=function(){switch(this.prefix){case"":return document.fullscreen;case"webkit":return document.webkitIsFullScreen;case"ms":return document.msFullscreenElement;default:return document[this.prefix+"FullScreen"]}},a.requestFullScreen=function(a){switch(this.prefix){case"":return a.requestFullscreen();case"ms":return a.msRequestFullscreen();default:return a[this.prefix+"RequestFullScreen"]()}},a.cancelFullScreen=function(){switch(this.prefix){case"":return document.exitFullscreen();case"ms":return document.msExitFullscreen();default:return document[this.prefix+"CancelFullScreen"]()}}),"undefined"!=typeof jQuery&&(jQuery.fn.requestFullScreen=function(){return this.each(function(){var b=jQuery(this);a.supportsFullScreen&&a.requestFullScreen(b)})}),window.fullScreenApi=a}();
